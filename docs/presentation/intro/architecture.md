---
sidebar_position: 1
sidebar_label: Архитектура
slug: /presentation/architecture
---

# Архитектура

## Стек

*  База данных: MongoDB
*  Сервер: NodeJS
*  Клиент: ReactNative
  
## Архитектура

> Техническая документация проекта описана в разделе **[Documentation](http://localhost:3002/docs/documentation)**

Приложение является кроссплатформенным и доступно на платформах: Web, iOS, Android

Приложение имеет 2 режима верстки: 
* Горизонтальная (телефон)  
* Вертикальная (веб, планшет)  
Обе разметки также можно применять на всех устройствах.   

Приложение основано на едином коде для всех платформ за редким исключением, когда:
* Библиотека не адаптирована под все платформы (используются несколько)
* Особенности восприятия интерфейса требуют реализовать разный функционал/вид для разных платформ
  

## Локальное хранилище
  
Сервер использует общую БД MongoDB, но мобильные устройства используют **дополнительную локальную** MongoDB.   

Это позволяет решить следующие задачи:  
  
### Актуальность данных

Благодаря синхронизации присходит обмен только актуальной информацеий.

При общении с сервером приложение отправляет следуюшие данные:
* Чтение
  * url (путь до области нужных данных в БД)
  * devicetime (время устройства на момент отправки запроса к серверу)
* Запись
  * url (путь до области нужных данных в БД)
  * data (данные для записи)
  * time (время считывания данных на устройстве)
  * devicetime (время устройства на момент отправки запроса к серверу)

Как сервер понимает, что информация актуальна, описано в разделе **механизм синхронизации** этой главы

### Оффлайн

Локальная БД на устройствах позволяет вести непрерывное заполнение журналов даже без доступа к сети благодаря **механизму синхронизации**

## Механизм синхронизации

При

> ### Реализация механизма синхронизации
> - [x] Структура БД и API, позволяющая понять актуальность данных
> - [ ] Реализация стека операций на офлайн устройствах с отправкой при подключении к сети или входе
> - [ ] Смещение разницы во времени на клиенте и сервере
> - [ ] Рекурсивный поиск новых данных на сервере и отправка на устройства
> - [ ] Подключение `FCM` для оповещения синхронизируемых устройств
> - [ ] Подключение (Redux | MobX) для обработки данных