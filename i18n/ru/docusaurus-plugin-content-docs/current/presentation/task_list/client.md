---
sidebar_position: 1
sidebar_label: Клиент
slug: /presentation/todo_list/client
---

# Задачи на клиенте

## Сущности

### [Дневники](/docs/presentation/history/intro)

<!-- [`Конструктор`](/docs/views/constructors#конструктор-дневников) -->

Конструктор

Реализованные `типы` дневников:

- [x] Линейные графики
- [x] Прогресс бар (круг)
- [x] Прогресс бар (линия)
- [x] Простое число
- [ ] WaterFall
- [ ] Bar Chart
- [ ] Pie Chart
- [ ] Combine Chart

Для добавления дневников в профиль, есть 2 способа:

<!-- - [x] [`конструктор дневников`](/docs/views/constructors#конструктор-дневников) -->

- [x] конструктор дневников
- [ ] Поиск в базе каталога

Редактирование добавленных дневников доступно через контекстное меню плитки дневника (long press | right mouse click):

- [x] Изменение периода
- [x] Изменение размера 0.5 | 1
- [x] Изменение типа графика
- [x] Изменение цвета графика
- [x] Изменение переменных дневника
- [x] Удаление дневника
- [ ] Удаление значения из лога
- [ ] Другие настройки:
  - - [ ] Цвет дневника
  - - [ ] Иконка дневника
  - - [ ] Порядковый номер
  - - [ ] Цвета наборов данных
  - - [ ] Тип дневника

**опционально**

- [ ] Изменение размера 0.125 | 0.25 | 0.625 | 0.75

### [Переменные](/docs/presentation/history/constructor_diary)

- [ ] Дополнительные пределы (пороги предупреждений) для переменных
- [ ] Персональные иконки для переменных

### [Медикаменты](/docs/presentation/storage_entities/medicaments)

<!-- [`Конструктор`](/docs/views/constructors#конструктор-медикаментов) -->

Конструктор

- [x] Добавление
- [x] Просмотр
- [x] Удаление медикамента
- [x] Редактировние
- [ ] Сбор данных по ссылке
- [ ] Отправка в чате

### Документы

Документы должны включать в себя такие поля как:

- [ ] Тип документа
- [ ] Служебные поля (серия, номер, ...)
- [ ] Набор изображений (опционально)

### Анализы

Анализы должны включать в себя такие поля как:

- [ ] Тип анализа
- [ ] Служебные поля (свой набор для каждого типа ...)
- [ ] Набор изображений (опционально)

## [Авторизация](/docs/presentation/security/intro)

- [ ] Вход через Google сервисы
- [ ] Вход через VK
- [ ] Вход по TouchID / FaceID
- [ ] Анкета при регистрации

## Активности

### [Планировщик](/docs/presentation/schedule/intro)

- [ ] Группировка событий (на одно время и дату)
- [ ] Уведомления о событиях (через Firebase)
- [ ] Отметка о выполнении событий
- [ ] Привязка выполнения к истории
- [ ] Просмотр информации о событии в отдельном окне
- [ ] Окно выбора типа события в `modal`
- [x] Редактирование событий
- [ ] Стилизация событий. Настройки.
- [ ] Фильтрация событий по типам в `wide` версии
- [ ] Новые типы событий
  - - [ ] Запись на прием к врачу
  - - [ ] Напоминание о ведении дневника

### Профиль

- [ ] Раздел документов
  - - [ ] Конструктор документов с выбором типа
  - - [ ] Просмотр
  - - [ ] Удаление
  - - [ ] Редактирование
- [ ] Раздел анализов
  - - [ ] Конструктор анализов с выбором типа
  - - [ ] Просмотр
  - - [ ] Удаление
  - - [ ] Редактирование
- [ ] Больше личной информации (опционально)

### [Чат](/docs/presentation/history/interaction#чаты)

- [x] Firebase messaging
- [x] Ссылки на данные пользователей вместо копирования
- [x] Подсчёт непрочитанных сообщений
  - - [x] Реструктуризация чата в БД у юзера ({id, lastSyncMessageId,})
  - - [x] При выгрузке чата смотреть считать сколько сообщений выше lastSyncMessageId (по ID)
  - - [x] Выводить число на экран
  - - [x] При открытии чата отправлять запрос на изменение lastSyncMessageId
  - - [x] Обновлять число непрочитанных сообщений (пересчёт / 0)
  - - [x] Удаление уведомлений на устройствах после прочтения
- [x] Действия с сообщениями:
  - - [x] Удаление (только своих)
  - - [x] Редактирование (только своих)
  - - [x] Выбор (для удаления группой)
- [x] Действия со вложениями
  - - [x] Фото открыть в диалоговом окне
  - - [x] Документ скачать
- [x] Удаление сообщений (только своих)
- [x] Редактирование сообщений (только своих)
- [x] Удаление чата (для создателя)
  - - [x] Удаление всех сообщений
  - - [x] Удаление всех файлов картинок из чата
  - - [x] Удаление всех файлов документов из чата
  - - [x] Удаление chat_id у всех участников
  - - [x] leaveSocket по уведомлению FCM
  - - [x] Отправка уведомлений об удалении чата
- [x] Прикрепление нескольких вложений
  - - [x] Разрешить прикрепление нескольких документов на клиенте
  - - [x] Считать массив файлов
  - - [x] Отправить массив файлов
  - - [x] Сохранить файлы
  - - [x] Записать в БД массив имён файлов
  - - [x] Отдать клиенту массив файлов
  - - [x] Отрисовать файлы в сообщении на экране
  - - [x] Действия с файлами на клиенте (скачать/посмотреть)
  - - [x] Слайдер фото во вложениях
- [ ] Проверка отправки сообщения
  - - [ ] В случае неудачи кешировать сообщение
  - - [ ] В случае неудачи повесить кнопку с (!)
  - - [ ] По кнопке предлагать отправить снова. Собирать данные и делать повторную отправку.
- [ ] Быстрая отправка дневника
  - - [ ] Сбор всех данных в один объект
  - - [ ] Получение информации о дневнике по ссылке
  - - [ ] Отправка данных в чате
- [ ] Быстрая отправка медикамента
  - - [ ] Сбор всех данных в один объект
  - - [ ] Получение информации о медикаменте по ссылке
  - - [ ] Отправка данных в чате
- [ ] Реализация обмена оставшимися [`типами информации`](/docs/presentation/history/interaction#чаты)
- [ ] Другие медиа вложения (аудио, видео)
- [ ] Поиск по сообщениям
- [ ] Улучшенный поиск по пользователям (больше параметров поиска)
- [ ] Настройки чата персональные
  - - [ ] Получение уведомлений
  - - [ ] Выйти из чата
- [ ] Галерея фото
  - - [ ] Переписать под мобилки (на полный экран, как ВК)
  - - [ ] Добавить кнопку скачать фул

### Уведомления

- [x] Firebase messaging
- [x] Notifee local notifications
- [ ] Notifee integration with Firebase
- [ ] Стилизация уведомлений

### Карта

- [x] Отображение карты
- [x] Запрос геолокации
- [x] Переход на местоположение пользователя
- [ ] Добавление меток с информацией
- [ ] Отображение меток с информацией
- [ ] Просмотр меток (клик по маркеру)
- [ ] Построение маршрутов до точек

### [Дневники](/docs/presentation/history/intro)

- [x] Добавлениие дневника через конструктор
- [x] Просмотр дневника, графика и логов
- [x] Добавление значения на дневник
- [x] Настройки дневника
- [x] Опрятный вид графика в окне просмотра дневника
- [x] Интервал времени, чтобы даты по оси не налазили друг на друга
- [x] Исправление метода представления информации
  - - [x] Сатурация = последнее значение
  - - [x] Рост, вес = последнее значение
  - - [x] Проверить все дневники
- [x] Ограничение лога по периоду
- [x] Валидация формы конструктора
- [x] На превью графиков убрать агрегацию (не обьединять последние замеры)
- [x] На окно дневника перенести график с превью
- [x] Добавить данные в историю (имитация активности)
- [x] Поправить интервал дат по оси, чтобы не налазили друг на друга
- [x] Добавить удаление дневника
- [x] Агрегация данных на полном графике
- [ ] Ед. изм = список для выбора
- [ ] Подгрузка лога по частям
- [ ] Редактирование лога
- [ ] Удаление значения из лога
- [ ] Нутриология
  - - [ ] Структура данных
  - - [ ] Создать каталог продуктов
  - - [ ] Добавление в БД новых продуктов
  - - [ ] График = прогресс (лимит по калориям)
  - - [ ] Лог = за день

## [Архитектура](/docs/presentation/architecture)

### [Оффлайн](/docs/presentation/architecture#оффлайн)

**Связь с сервером**

- [x] При запуске приложения проверять наличие связи с сервером.
- [x] Отслеживание ошибок сервера
- [x] Отслеживание отсутствие связи с сервером
- [x] Уведомление пользователя об ошибке передачи данных
- [x] Сохранение данных в очередь синхронизации
- [x] Периодическая проверка связи с сервером
- [x] Синхронизация при появлении связи с сервером

**Подключение к сети**

- [x] Отстлеживание подключения к сети
- [x] Уведомление пользователя об отсутствии подключения к сети
- [x] При отсутствии сети добавлять транзакции в очередь синхронизации
- [x] Синхронизация при появлении сети

### [Механизм синхронизации](/docs/presentation/architecture#реализация-механизма-синхронизации)

- [x] Структура БД и API, позволяющая понять актуальность данных
- [x] Смещение разницы во времени на клиенте и сервере
- [x] Рекурсивный поиск новых данных на сервере
- [x] Подключение [`FCM`](https://firebase.google.com/products/cloud-messaging?hl=ru) для оповещения синхронизируемых устройств
- [x] Подключение ([Redux](https://redux.js.org/) | [MobX](https://mobx.js.org/)) для обработки данных
- [x] Проход по syncQueue, отправка транзакций, удаление из очереди.
- [x] На сервере смотреть timestamp транзакции, если он меньше чем \_T записи в БД (данные не акутальны), - отклонять действие. Иначе применять.
- [x] Если syncQueue пустая запрашивать актуальные данные (webget)

## Общее

- [x] Карусель на веб мобилках
- [x] navigator.serviceWorker на мобилках
- [x] Холдеры на загрузку данных
- [x] Синхронизация хранилищ
- [x] Поднимать контент при появлении клавиатуры
- [ ] Autodeploy GitHub/Travis/Jenkins
- [x] Интернационализация
- [ ] Тёмная тема
- [ ] Спец. статус на отсутствие данных в БД (не 500)
- [ ] Переписать DateTimePicker под NativeBase
- [ ] Удалить react-native-ui-lib
- [ ] 3 размера картинок
  - - [ ] Thumbnail 128px (фон)
  - - [ ] Resize 320px (Просмотр)
  - - [ ] Full (скачивается отдельно по ссылке)
