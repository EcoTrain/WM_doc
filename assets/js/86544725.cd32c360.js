"use strict";(self.webpackChunkdoc_server=self.webpackChunkdoc_server||[]).push([[4800],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return h}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(a),h=r,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||i;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},8215:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(7294);function r(e){var t=e.children,a=e.hidden,r=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:r},t)}},9877:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(7462),r=a(7294),i=a(2389),o=a(7556),l=a(6010),s="tabItem_LplD";function c(e){var t,a,i,c=e.lazy,u=e.block,d=e.defaultValue,p=e.values,h=e.groupId,m=e.className,f=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=p?p:f.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),b=(0,o.lx)(v,(function(e,t){return e.value===t.value}));if(b.length>0)throw new Error('Docusaurus error: Duplicate values "'+b.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===d?d:null!=(t=null!=d?d:null==(a=f.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(i=f[0])?void 0:i.props.value;if(null!==g&&!v.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=(0,o.UB)(),y=k.tabGroupChoices,w=k.setTabGroupChoices,T=(0,r.useState)(g),N=T[0],O=T[1],_=[],x=(0,o.o5)().blockElementScrollPositionUntilNextRender;if(null!=h){var E=y[h];null!=E&&E!==N&&v.some((function(e){return e.value===E}))&&O(E)}var D=function(e){var t=e.currentTarget,a=_.indexOf(t),n=v[a].value;n!==N&&(x(t),O(n),null!=h&&w(h,n))},j=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=_.indexOf(e.currentTarget)+1;a=_[n]||_[0];break;case"ArrowLeft":var r=_.indexOf(e.currentTarget)-1;a=_[r]||_[_.length-1]}null==(t=a)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":u},m)},v.map((function(e){var t=e.value,a=e.label,i=e.attributes;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:function(e){return _.push(e)},onKeyDown:j,onFocus:D,onClick:D},i,{className:(0,l.Z)("tabs__item",s,null==i?void 0:i.className,{"tabs__item--active":N===t})}),null!=a?a:t)}))),c?(0,r.cloneElement)(f.filter((function(e){return e.props.value===N}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==N})}))))}function u(e){var t=(0,i.Z)();return r.createElement(c,(0,n.Z)({key:String(t)},e))}},9652:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return f},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return h}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),o=a(9877),l=a(8215),s=["components"],c={sidebar_position:2,sidebar_label:"Architecture",title:"Architecture",id:"architecture",slug:"/presentation/architecture"},u=void 0,d={unversionedId:"presentation/intro/architecture",id:"presentation/intro/architecture",title:"Architecture",description:"Technology stack",source:"@site/docs/presentation/intro/architecture.md",sourceDirName:"presentation/intro",slug:"/presentation/architecture",permalink:"/wellness_doc/docs/presentation/architecture",editUrl:"https://github.com/EcoTrain/newmed_docs/tree/master/docs/docs/presentation/intro/architecture.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"Architecture",title:"Architecture",id:"architecture",slug:"/presentation/architecture"},sidebar:"presentation",previous:{title:"About in brief",permalink:"/wellness_doc/docs/presentation"},next:{title:"Authentication",permalink:"/wellness_doc/docs/presentation/security"}},p={},h=[{value:"Technology stack",id:"tech_stack",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Local storage",id:"local_storage",level:2},{value:"Data relevance",id:"data_relevance",level:3},{value:"Offline",id:"offline",level:3},{value:"Synchronization mechanism",id:"synchronization_mechanism",level:3}],m={toc:h};function f(e){var t=e.components,a=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"tech_stack"},"Technology stack"),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"1",label:"NodeJS",default:!0,mdxType:"TabItem"},(0,i.kt)("img",{align:"left",src:"/wellness_doc/img/presentation/about/stack/nodejs_logo.svg",style:{width:"10%",marginRight:20}}),"NodeJS + Express allows you to quickly process a large number of requests and cover a large audience of users"),(0,i.kt)(l.Z,{value:"2",label:"React Native",mdxType:"TabItem"},(0,i.kt)("img",{align:"left",src:"/wellness_doc/img/presentation/about/stack/rn_logo.svg",style:{width:"10%",marginRight:20}}),"Our interface is written in React Native, which allows us to provide a cross-platform product and support for Web, iOS, Android"),(0,i.kt)(l.Z,{value:"3",label:"MongoDB",mdxType:"TabItem"},(0,i.kt)("img",{align:"left",src:"/wellness_doc/img/presentation/about/stack/mongodb_logo_black.png",style:{width:"10%",marginRight:20}}),"MongoDB is used for data storage, it allows for greater scalability and high schema flexibility."),(0,i.kt)(l.Z,{value:"4",label:"Firebase",mdxType:"TabItem"},(0,i.kt)("img",{align:"left",src:"/wellness_doc/img/presentation/about/stack/firebase_logo.svg",style:{width:"10%",marginRight:20}}),"You will be notified of important events. Customize your notifications or receive them from other users. All interactions between users are accompanied by dynamic data updates on both devices")),(0,i.kt)("h2",{id:"architecture"},"Architecture"),(0,i.kt)("p",null,"The application is cross-platform and available on platforms: Web, iOS, Android\nThe application has two layout modes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Phone"),(0,i.kt)("li",{parentName:"ul"},"Wide (web, tablet)\nBoth markups can also be applied across all devices.")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Single code")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The application is based on a single code for all platforms with rare exceptions when:"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"The library is not adapted to all platforms (several are used)"),(0,i.kt)("li",{parentName:"ul"},"Features of the perception of the interface require the implementation of different functionality / look for different platforms")),(0,i.kt)("p",{parentName:"div"},"That allows you to implement a single logic and reduce the number of vulnerabilities"))),(0,i.kt)("h2",{id:"local_storage"},"Local storage"),(0,i.kt)("p",null,"The server uses a shared MongoDB database, but mobile devices use an ",(0,i.kt)("strong",{parentName:"p"},"additional local")," MongoDB."),(0,i.kt)("p",null,"This allows the user to perform the following tasks:"),(0,i.kt)("h3",{id:"data_relevance"},"Data relevance"),(0,i.kt)("p",null,"Thanks to synchronization, only relevant information is exchanged."),(0,i.kt)("p",null,"When communicating with the server, the application sends the following data:"),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"1",label:"Read",default:!0,mdxType:"TabItem"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"url (path to the required data area in the database)"),(0,i.kt)("li",null,"devicetime (device time at the time the request was sent to the server)"))),(0,i.kt)(l.Z,{value:"2",label:"Write",mdxType:"TabItem"},(0,i.kt)("ul",null,(0,i.kt)("li",null,"url (path to the required data area in the database)"),(0,i.kt)("li",null,"devicetime (device time at the time the request was sent to the server)"),(0,i.kt)("li",null,"data (data to write)"),(0,i.kt)("li",null,"time (time to read data on the device)")))),(0,i.kt)("p",null,"How the server understands that the information is up-to-date is described in the ",(0,i.kt)("strong",{parentName:"p"},"synchronization mechanism")," section of this chapter."),(0,i.kt)("h3",{id:"offline"},"Offline"),(0,i.kt)("p",null,"Local database on devices allows continuous filling of logs even without network access thanks to ",(0,i.kt)("strong",{parentName:"p"},"synchronization mechanism")),(0,i.kt)("h3",{id:"synchronization_mechanism"},"Synchronization mechanism"),(0,i.kt)("p",null,"When acting with the database, the data is sent to the server (if there is a network). Otherwise, the transaction is added to the synchronization queue. When a request is received, the server compares the last data modification time in the database and the time specified in the request data."),(0,i.kt)("p",null,"Data is considered relevant if:",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Read"),": if the time per request is less than the last time the data was changed in the database.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Write"),": if the time at the time of writing the data is less than the last time the data was changed in the database. This means that newer data has already been recorded. If the data is up to date, the server overwrites it in the database and returns the current time when writing to the database. (Actual time = req.devicetime - servertime + req.time)"),(0,i.kt)("p",null,"After unloading all the data from the queue, the actual data from the server database is requested to the server."))}f.isMDXComponent=!0}}]);